{{extend 'layout.html'}}



<link rel="stylesheet" href="{{=URL('static', 'js_and_css/ui.theme.css')}}" type="text/css" />

<link rel="stylesheet" href="{{=URL('static', 'js_and_css/jquery-ui.css')}}" type="text/css" />

<link rel="stylesheet" href="{{=URL('static', 'js_and_css/style.css')}}" type="text/css" />

<script src="{{=URL('static','js_and_css/jquery-1.8.2.js')}}"></script>

<script src="{{=URL('static','js_and_css/jquery-ui.js')}}"></script>

  

  <style type="text/css">

 input[type=text], input[type=password],  select {

    margin: 2px 0px 2px 0px;

	width:100px;

}

div.error {

    padding: 0px;

	width:inherit;

	margin-left:0px;

}

.page_color,body{

	font-family:Arial, Helvetica, sans-serif;

	font-size:13px;	

	}

	

 </style>

 

 

 <script>

var base_url=location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + "/{{=request.application}}/";



$(function() {

	 	var valueListStr="";		

		$('#depot_id').keyup(function(){

			$.ajax({

				  url: base_url+'default/get_depot_list',

				  success: function(resStr) {

					  valueListStr=resStr

				  }

				});

			

			//-------------------------

			var valueList = valueListStr.split(',');				

			var searchValue=$("#depot_id").val();

			

			//---------------- auto complete combo list

			var valueList_new=new Array();

			lc=0;

			i =0;

			var valueStr="";				

			while (i < valueList.length)

			{

				valueStr=valueList[i];

				i=i+1;					

				var res=valueStr.toUpperCase().match(searchValue.toUpperCase());

				if (res!=null){

					valueList_new[lc]=valueStr;

					lc=lc+1;

					if (lc==30){

						break;

					};

				}else{

					continue;

				}					

			};

			//alert (ref_list_new);

			

			//-------------- auto complete source

			$( "input#depot_id" ).autocomplete({

				source: valueList_new

			});

		

	  }); 

	   //==============	   

	   

	   var valueListStr2="";		

		$('#depot_id_from_to').keyup(function(){

			$.ajax({

				  url: base_url+'default/get_depot_list',

				  success: function(resStr) {

					  valueListStr2=resStr

				  }

				});

			

			//-------------------------

			var valueList = valueListStr2.split(',');				

			var searchValue=$("#depot_id_from_to").val();

			

			//---------------- auto complete combo list

			var valueList_new=new Array();

			lc=0;

			i =0;

			var valueStr="";				

			while (i < valueList.length)

			{

				valueStr=valueList[i];

				i=i+1;					

				var res=valueStr.toUpperCase().match(searchValue.toUpperCase());

				if (res!=null){

					valueList_new[lc]=valueStr;

					lc=lc+1;

					if (lc==30){

						break;

					};

				}else{

					continue;

				}					

			};

			//alert (ref_list_new);

			

			//-------------- auto complete source

			$( "input#depot_id_from_to" ).autocomplete({

				source: valueList_new

			});

		

	  }); 

	   //==============	 

	   

	   var valueListStr3="";		

		$('#depot_id_value').keyup(function(){

			$.ajax({

				  url: base_url+'default/get_receive_depot_list',

				  success: function(resStr) {

					  valueListStr3=resStr

				  }

				});

			

			//-------------------------

			var valueList = valueListStr3.split(',');				

			var searchValue=$("#depot_id_value").val();

			

			//---------------- auto complete combo list

			var valueList_new=new Array();

			lc=0;

			i =0;

			var valueStr="";				

			while (i < valueList.length)

			{

				valueStr=valueList[i];

				i=i+1;					

				var res=valueStr.toUpperCase().match(searchValue.toUpperCase());

				if (res!=null){

					valueList_new[lc]=valueStr;

					lc=lc+1;

					if (lc==30){

						break;

					};

				}else{

					continue;

				}					

			};

			//alert (ref_list_new);

			

			//-------------- auto complete source

			$( "input#depot_id_value" ).autocomplete({

				source: valueList_new

			});

		

	  }); 

	   //==============	

	   

}); 

</script>



<body >

<table width="100%"  border="0" cellspacing="0" cellpadding="0" style="background-color:#FFFFFF;" >

  <tr height="30px" >

    <td width="400"><span class="blackCatTitle">Branch/Dealer Settings</span></td>

	<td align="right"><span class="blackCatTitle">
   <button type="submit" class="button_update" onClick="window.location.href='/{{=session.appName}}/depot/depot'">Depot</button>


    </span></td>
    <td align="right" width="20px">&nbsp;</td>
  </tr>
  <tr  height="1px" style="background-color:#CCCCCC;">
	    <td ></td><td ></td><td ></td>
  </tr>
  </table>

  

  <table width="100%" height="500px"  border="0" cellspacing="0" cellpadding="0" class="page_color"  >

  <tr height="100%"  style="vertical-align:top;">

    <td>

	<table width="100%"  border="0" cellpadding="0" cellspacing="0"  >

      <tr>

        <td width="10px">&nbsp;</td>

        <td>&nbsp;</td>

      </tr>

     

	  <tr>

        <td>&nbsp;</td>

        <td align="left" valign="top">

        	

		    <table width="800" border="1" cellpadding="1" cellspacing="1" class="sample_border" >

			 <form id="form1" name="form1" method="post" action="{{=URL(c='depot',f='depot_settings')}}">

              

			   <tr align="left" height="20px" ;"vertical-align:middle">

                 <td colspan="2"  ><input type="hidden" name="type_value" id="type_value" value="Receive"/>

                   Receive From 

                   

                   {{if session.depot_id_value=='' or session.depot_id_value==None:}}

                        <input  name="depot_id_value" type="text" id="depot_id_value" size="25" value=""  style="width:300px;"  placeholder="Select Receive From Depot" autocomplete="off"/>

                    {{else:}}

                        <input  name="depot_id_value" type="text" id="depot_id_value" size="25" value="{{=session.depot_id_value}}" style="width:300px;" placeholder="Select Receive From Depot" autocomplete="off"/>

                    {{pass}}

                   

                   <input type="submit" name="btn_filter" id="btn_filter" value="  Filter  "   class="button_update"/>

                   &nbsp;

                   <input type="submit" name="btn_all" id="btn_all" value="  All  "   class="button_update"/>

                 </td>

                 <td colspan="2" align="right"  ><a href="{{=URL(c='depot',f='depot_settings_batch_upload')}}">

                   <input type="button" name="Input2" id="Input" value=" Batch Upload "   class="button_update"/>

                 </a></td>

                </tr>

			   </form>

			   </table><br>

				               

               <table width="800" border="1" cellpadding="1" cellspacing="1" class="sample_border" >

               <tr align="left" class="blackCatHead" height="20px" ;"vertical-align:middle">

                 <td width="300"  >BranchID / External Source </td>

                 <td width="98"  >&nbsp;</td>

                 <td  >Branch ID / External Source </td>

                 <td width="30" s="s" >&nbsp;</td>

               </tr>

			   {{if access_permission==True:}}

			   <tr  align="left" class="blackCat"  style="vertical-align:middle">

			   {{=form.custom.begin}}

				<td width="300" >

				<input type="text" name="depot_id" id="depot_id" value="" style="width:250px;" placeholder="Select Depot" autocomplete="off"/>				

				

                </td>

				<td width="98" ><input type="text" name="" id="" value="Receive from" disabled="disabled" style="background-color:#F3F3F3"/></td>

				<td >

				<input type="text" name="depot_id_from_to" id="depot_id_from_to" value="" style="width:250px;" placeholder="Select Receive From Depot" autocomplete="off"/>

                

                </td>

				<td align="right"  >{{=form.custom.submit}}</td>

				{{=form.custom.end}}			   </tr>

			   {{pass}}

			   

			   {{ p=0}} 		  

			   {{for i,record in enumerate(records):}}

			   {{ if i==items_per_page: break}}

              <form id="form1" name="form1" method="post" action="{{=URL(c='depot',f='depot_settings_edit',args=[page,record.sm_depot_settings.id])}}">

                                  

                  <tr  align="left" class="blackCat"  style="vertical-align:middle"> 

                  <td width="300" >{{=record.sm_depot_settings.depot_id}} | {{=record.sm_depot.name}}</td>

                  <td width="98" >Receive from </td>

                  <td >                  

                  {{=record.sm_depot_settings.depot_id_from_to}}

                  {{depotRows=db((db.sm_depot.cid==session.cid)&(db.sm_depot.depot_id==record.sm_depot_settings.depot_id_from_to)).select(db.sm_depot.name,limitby=(0,1))}}

                  {{if depotRows:}} | {{=depotRows[0].name}}{{pass}}

                  </td>

                  <td align="right"  ><input type="submit" name="btn_go" id="btn_go" value="&gt;&gt;"  class="button_update"/>        </td>

                </tr>

              </form>

			  

			   {{pass}}

		    </table>



        </td></tr>

    </table>

      

{{if page:}}

&nbsp;&nbsp;<a href="{{=URL(args=[page-page])}}">first</a> |

&nbsp;&nbsp;<a href="{{=URL(args=[page-1])}}">previous</a> |

{{pass}}



{{if len(records)>items_per_page:}}

&nbsp;&nbsp;<a href="{{=URL(args=[page+1])}}">next</a>

{{pass}}

	</td>

  </tr>

</table>

</body> 

